<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AZoom Car Rental Office</title>
    <link rel="icon" href="images/favicon.ico" type="image/x-icon">
    <!-- CSS -->
    <link href="style/main.css" rel="stylesheet">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Font Awesome Link -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
</head>

<body>
    <div class="nav-container">
        <a href="index.html" class="logo" id="home"><b>AZoom Rental</b></a>
        <nav>
            <!-- <a href="about.html">About Us</a> -->
            <a href="reserve-car.html" id="reserve_car">Reserve Car</a>
            <a href="contact.html">Contact Us</a>
            <div class="dropdown" style="float: right;">
                <button class="dropbtn">
                    <i class="fa-solid fa-user"></i>
                </button>
                <div class="dropdown-content">
                    <a href="login.html" id="member_login">Member Login</a>
                    <a href="signup.html" id="member_register">Register</a>
                </div>
            </div>
        </nav>
    </div>
    <section id="form-main">
        <div class="row align-items-center">
            <div class="col-12">
                <div>
                    <div class="confirm-header">
                        <h4 style="padding-left: 15px;">Receipt No: <span id="receipt-no"></span></h4>
                        <h6 style="padding-left: 15px;">
                            Reservation has been made successfully!</span>
                        </h6>
                    </div>


                    <div class="row">
                        <div class="col-12">
                            <label style="font-size: 13px; color: #B4B6B7;">Credit Card Number</label>
                            <div class="select-icon">
                                <i class="fa-solid fa-credit-card"></i>
                                <input id="creditcard" placeholder="1234 5678 9012 3456"
                                    oninput="formatCardNumber(this)" disabled />
                            </div>
                        </div>
                        <div class="col-md-6 col-12">
                            <label style="font-size: 13px; color: #B4B6B7;">Pickup Date & Time</label>
                            <div class="select-icon">
                                <i class="fa-solid fa-male"></i>
                                <input id="pickup" type="datetime-local" disabled />
                            </div>
                        </div>
                        <div class="col-md-6 col-12">
                            <label style="font-size: 13px; color: #B4B6B7;">Return Date & Time</label>
                            <div class="select-icon">
                                <i class="fa-solid fa-male"></i>
                                <input id="return" type="datetime-local" disabled />
                            </div>
                        </div>

                        <div class="col-md-6 col-12">
                            <label style="font-size: 13px; color: #B4B6B7;">Pickup Branch</label>
                            <div class="select-icon">
                                <i class="fa-solid fa-map-pin"></i>
                                <input id="pickupLocation" disabled />
                            </div>
                        </div>
                        <div class="col-md-6 col-12">
                            <label style="font-size: 13px; color: #B4B6B7;">Return Carpark</label>
                            <div class="select-icon">
                                <i class="fa-solid fa-car"></i>
                                <input id="returnLocation" disabled />
                            </div>
                        </div>

                        <h4 style="padding-left: 10px; margin-top: 50px;">Add-ons</h4>
                        <div class="add-on col-12">
                            <p style="margin-bottom: 0; font-size: 16px;"><b>Insurance Option</b></p>
                            <input type="checkbox" class="add-on-checkbox" data-addon="insurance"
                                disabled /><span>Reduce excess
                                from $4,500 to $2,500
                                -- <b>$15/day</b></span>

                            <p style="margin-bottom: 0; margin-top: 1rem; font-size: 16px;"><b>Others</b></p>
                            <input type="checkbox" class="add-on-checkbox" data-addon="childSeat" disabled /><span>Child
                                Seat --
                                <b>$15/day</b></span>
                            <br>
                            <input type="checkbox" class="add-on-checkbox" data-addon="malaysia" disabled /><span>Drive
                                to
                                Malaysia --
                                <b>$50/day</b></span>
                        </div>
                        <hr>
                        <div class="important-note col-12">
                            <i class="fa-solid fa-exclamation-circle" style="color: #ff335f; font-size: 15px;"></i>
                            <span style="color: #ff335f; padding-left: 10px;">
                                Please return car by
                                <span id="return_car_time"></span>
                            </span>
                        </div>
                        <div class="important-note col-12" style="margin-bottom: 10px;">
                            <i class="fa-solid fa-exclamation-circle" style="color: #ff335f; font-size: 15px;"></i>
                            <span style="color: #ff335f; padding-left: 10px;">
                                Exact 24 hours is considered as 1 day
                            </span>
                        </div>

                        <div class="col-12" style="text-align: left; padding-right: 20px; margin-bottom: 20px;">
                            <span>Rental Days: <span id="total_days">0</span> day(s)</span>
                            <h5 style="margin-top: 5px;">Total: $<span id="total_payment_cost">0.00</span>.00</h5>
                        </div>
                        <div class="col-md-6 col-12" style="text-align: left; padding-right: 20px;">
                            <a href="#" class="text-primary" data-bs-toggle="modal" data-bs-target="#termsModal">
                                Rental Terms & Conditions
                            </a>
                        </div>
                    </div>

                </div>

            </div>
        </div>
    </section>

    <!-- Terms & Conditions Modal -->
    <div class="modal fade" id="termsModal" tabindex="-1" aria-labelledby="termsModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="termsModalLabel">Rental Terms & Conditions</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Driver must be 21+ with a valid license.</p>
                    <p>International customers must provide a valid passport and an International Driving Permit (IDP)
                        if required.</p>
                    <p>The rented vehicle must only be used for personal or business travel within the allowed
                        locations.</p>
                    <p>No off-road driving, racing, or illegal activities.</p>
                    <p>Return with at least 20% charge.</p>
                    <p>Extra charges apply for late returns and damages.</p>
                    <p>more...</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <section id="footer">
        <div class="row">
            <div class="footer-row col-md-4 col-12">
                <b>AZoom Rental</b> <br>
                <p>A Trusted Service at your fingertip.</p>
            </div>
            <div class="footer-row col-md-4 col-12">
                <h4>Resources</h4>
                <p>Reserve a Car</p>
                <p>Manage Account</p>
                <p>Help</p>
            </div>
            <div class="footer-row col-md-4 col-12">
                <h4>Contact</h4>
                <p>Email: info@azoomcarrental.com</p>
            </div>
            <div class="footer-row-2 col-md-6 col-12" style="margin-top: 20px; text-align: left;">
                <span>Terms of Service &emsp; Privacy Policy</span>
            </div>
            <div class="footer-row-3 col-md-6 col-12" style="margin-top: 20px; text-align: center;">
                <span>&copy; 2025 AZoom Car Rental - All Rights Reserved.</span>
            </div>
        </div>
    </section>

    <!-- JavaScript -->
    <script src="script/main.js"></script>
    <script>
        const receiptNo = params.get('receiptNo');
        document.addEventListener("DOMContentLoaded", function () {
            function loadSummary() {
                const rentalHistory = JSON.parse(localStorage.getItem("rentalHistory")) || [];
                const reservation = rentalHistory.find(r => r.receipt_no === receiptNo);

                console.log(reservation);

                const formattedCard = formatCardNumber(reservation.credit_card);
                const formattedReturnTime = formatDateTime(reservation.return_date_time);

                document.getElementById("receipt-no").textContent = reservation.receipt_no;
                document.getElementById("creditcard").value = formattedCard;
                document.getElementById("pickup").value = reservation.pickup_date_time;
                document.getElementById("return").value = reservation.return_date_time;
                document.getElementById("return_car_time").textContent = formattedReturnTime;
                document.getElementById("pickupLocation").value = reservation.pickup_location;
                document.getElementById("returnLocation").value = reservation.return_location;
                document.getElementById("total_days").textContent = reservation.rental_days;
                document.getElementById("total_payment_cost").textContent = reservation.rental_cost;
            }

            function formatCardNumber(cardNumber) {
                if (!cardNumber) return "****-****-****-****"; // Default if no card is found
                return "****-****-****-" + cardNumber.slice(-4); // Mask all but last 4 digits
            }

            function formatDateTime(isoString) {
                const date = new Date(isoString);

                const options = {
                    day: "2-digit",
                    month: "short", // "Feb"
                    year: "numeric",
                    hour: "2-digit",
                    minute: "2-digit",
                    hour12: true // AM/PM format
                };

                return date.toLocaleString("en-US", options).replace(",", "");
            }

            window.onload = function () {
                loadSummary();
            };
        });



    </script>
</body>

</html>